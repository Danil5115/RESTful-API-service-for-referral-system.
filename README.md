# RESTful-API-service-for-referral-system.
# Реферальная Система
### Описание
Проект представляет собой RESTful API сервис для реферальной системы. Пользователи могут регистрироваться, аутентифицироваться через JWT Oauth 2.0, создавать и удалять свои реферальные коды, получать реферальный код по email адресу реферера, регистрироваться по реферальному коду, а также получать информацию о своих рефералах.

### Технологии
* Django & Django REST Framework для backend части.
* JWT для аутентификации.
* SQLite для базы данных.
* drf-yasg для генерации Swagger UI документации.

### Установка и Запуск
1. Клонируйте репозиторий:
```
git clone https://github.com/Danil5115/RESTful-API-service-for-referral-system..git
```
2. Создание виртуального окружения:
```
python -m venv venv 
.\venv\Scripts\activate
```
3. Установка зависимостей
```
pip install -r requirements.txt
```
5. Перейдите в папку проекта referral_project
6. Миграции. Примените миграции для создания таблиц в базе данных:
```
python manage.py migrate
```
7. Запуск сервера:
```
python manage.py runserver
```


### Тестирование API
Для тестирования API вы можете использовать Postman или любой другой инструмент для работы с HTTP-запросами. В проекте также настроена документация Swagger, доступная по адресу /swagger/ после запуска проекта.
При тестирование в swagger, там удобно настроены все необходимые endpoint, что делает процесс удобным и понятным. Весь необходимый функционал, который был в тестовом задание был реализован
Так же сам код и его структура понятна, и дополнена комментариями

#### Важная вещь связанная с тестированием
Аутентификация происходит через JWT, то каждому пользователю присвоен свой личный токен для аутентификации, который используется в Headers, так как лично я тестировал весь функционал через Postman, но для Swagger UI, я добавил возможность легко и просто аутентифицироваться через данный токен
После того как вы пройдёте через -> register(зарегистрируете пользователя, пункт с рефералом необходимо удалить, так как на момент использования вами, никаких реферальных кодов ещё не существует) и затем перейдёте в -> /api/token/ (введете логин и пароль, получите два токена refresh, для того чтобы обновить токен, и access, который нужен для аутентификации пользователя)
![текст](https://github.com/Danil5115/RESTful-API-service-for-referral-system./blob/main/.idea/1.png)
После получения токена, в Swagger UI на верху, вам необходимо перейти в Authorize, где ниже будет аутентификация Bearer (apiKey). В самом низу вам надо будет вставить **Bearer \<token\>**, access токен который вы получили ранее, и тем самым пользователь имеет возможность для всех остальных операций таких как 
* create-referral (создание своего реферального кода)
* delete-referral-code (удаление своего реферального кода)
* get-referral-code (при помощи мэйл адреса другого пользователя) возможность получения реферального кода по email адресу реферера;
* user (получение информации о рефералах по id реферера)
Все остальные endpoint, так же полностью рабочие, для проверки всего функционала, необходимо создать несколько пользователей и создать ими реферальные коды, а затем зарегистрировать нового пользователя при регистрации указвашего реферальный код
#### Функциональные требования
Выполнено все, что было указано в тестовом и без проблем тестируется и всё работает, при помощи того же Swagger UI, и Postman

### Опциональные задачи:
* Clearbit. Из-за того, что в условиях пользования данной программы было указано, что API ключи(необходимые для реализации данной возможности) для зарегистрированных с 2024 не даются, реализовать данную часть полноценно не смог(API keys are available for Clearbit accounts created in 2023 and earlier. If you signed up in 2024, free or paid plans with API keys are not available). Поэтому там есть задокументированный код, который мог бы выполнять данную задачу, но без API key не может
*  emailhunter.co Похожая ситуация, но для регистрации необходимы верификация номером телефона, на российский номер телефона код не приходит, поэтому api key для реализации невозможно получить. Код в комментарии реализован
*  Кеширование реферальных кодов с использованием in-memory БД. Реализован внутри кода. Я бы использовал для данных целей docker с Redis'ом, но условия задачи были иными

### Стек
Полностью соответствует требованиям, технологии были указаны выше

### Требования к проекту
Были так же выполнены, что можно увидеть по коду, за исключением одного. Так как в условиях была указана возможность использовать любого современного framework, я использовал Django, в котором нет полноценной возможности реализовать асинхронность таким образом, чтобы получить полноценно функционирующий код со всеми выгодами(исходя из официальной документации и опыта), и учитывая все операции, это приводило лишь к усложнению кода и ухудшению его функционала. По моему мнению, проект на данный момент хорошо выполняет все поставленные задачи, но если есть принципиальный вопрос, к требованиям и коду, я открыт для предложений для исправлений и работы над проектом

### Заключение
По итогам данного проекта были реализованы все необходимые требования, указанные в тестовом, в случае каких-либо вопросов прошу, обращайтесь и я готов ответить на все вопросы, и при необходимости внести необходимые изменения
